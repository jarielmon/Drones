# Drones
API implementation with .NET Core and DDD.

## Solution Design
The solution design focuses on a basic Domain Driven Design techniques and implementation, while keeping the things as simple as possible. Multiple assemblies are used for separation of concerns to keep logic isolated from the other components. **.NET 6 C#** is the default framework and language for this application.

### Assembly Layers
-   **Drones.Domain**  - This assembly contains common, entities and interfaces.
-   **Drones.Application**  - This assembly contains all services implementations.
-   **Drones.Infrastructure**  - This assembly contains the infrastructure of data persistence.
-   **Drones.API**  - This assembly is the web api host.

## How to run application: 

1. Ctrl + F5 to run ...

## Test instructions

The application has a set of data previously inserted for testing.

1. Registering a drone (http://localhost:5263/api/Drone)
-	e.g. Request JSON
>	{
>	  "id": 0,						(The id is not necessary to specify it will be autogenerated, this applies to all tables)
>	  "serialNumber": "00012",		(100 characters max)
>	  "model": 1,					(Values for model: 1 - Lightweight, 2 - Middleweight, 3 - Cruiserweight, 4 - Heavyweight)					
>	  "weightLimit": 100,			(500gr max)
>	  "batteryCapacity": 70,		(0 - 100 percentage)
>	  "state": 1 					(Values for state: 1 - IDLE, 2 - LOADING, 3 - LOADED, 4 - DELIVERING, 5 - DELIVERED, 6 - RETURNING)
>	}

2. Loading a drone with medication items (http://localhost:5263/api/DroneMedication)
-	e.g Request JSON (You must specify the id of the drone, the id of the medication and the quantity of medication)
>	{
>	  "droneId": 7,					(Previously added drone id)
>	  "medicationId": 1,			(Previously added medication id)
>	  "count": 3					(Amount of medication, e.g. three boxes of Acetaminophen, each box has a weight of 20g, the capacity it occupies in the drone will be 3*20)
>	}

3. Checking loaded medication items for a given drone (http://localhost:5263/api/DroneMedication/9/CheckLoadedMedicationItems where 9 is drone id)
-	e.g Response JSON
>	[
>	  {
>	    "droneId": 9,				(Drone id)
>	    "medicationId": 6,			(Medication id)
>	    "count": 2 					(Amount of medication, e.g. three boxes of Ativan, each box has a weight of 150g, the capacity it occupies in the drone will be 2*150)
>	  }
>	]

4. Checking available drones for loading (http://localhost:5263/api/Drone/CheckAvailableForLoading)
-	e.g.Response JSON
>	[
>	  {
>	    "id": 4,
>	    "serialNumber": "00004",
>	    "model": 2,
>	    "weightLimit": 200,
>	    "batteryCapacity": 90,
>	    "state": 1
>	  }
>	]

5. Check drone battery level for a given drone (http://localhost:5263/api/Drone/9/CheckBatteryLevel where 9 is drone id)
-	e.g. Response: Returns a value between 0 and 100, indicating the battery level.

6. Periodic task to check drones battery levels and create history/audit event log for this.
-	I have created a background service that runs every 5 minutes and writes the battery status of the drones to a log file located Drones.API\bin\Debug\net6.0\Log

There are other generic endpoints in the API that were created for complementary use.

